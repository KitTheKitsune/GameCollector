<!doctype html>
<html>
<head>
   <link rel="stylesheet" href="css/style.css">
   <link rel="manifest" href="manifest.json">
   <link rel="icon" href="favicon.ico" type="image/x-icon" />
   <link rel="apple-touch-icon" href="images/hello-icon-512.png">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="white" />
  <meta name="apple-mobile-web-app-capable" content="yes" >
  <meta name="apple-mobile-web-app-status-bar-style" content="black" >
  <meta name="apple-mobile-web-app-title" content="Hello World">
  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="images/hello-icon-144.png">
  <style>
    
    
  </style>
  
</head>
<body class="Body">
  <p>V0.1.3</p>
  <div id="HomeScreen">
    <div class="Content">
      <div class="ButtonLine">
        <button type="image" class="SectionButton"><img src="images/collection.jpeg" class="ButtonImage" 
                                                        onclick="selectionClick('CollectionScreen')"></button>
        <button type="button" class="SectionButton"><img src="images/analysis.png" class="ButtonImage"
                                                         onclick="selectionClick('AnalysisScreen')"></button>
      </div>
      <div class="ButtonLine">
        <button type="button" class="SectionButton"><img src="images/recommend.png" class="ButtonImage"
                                                         onclick="selectionClick('RecommendScreen')"></button>
        <button type="button" class="SectionButton"><img src="images/addNew.png" class="ButtonImage"
                                                         onclick="selectionClick('AddNewScreen')"></button>
      </div>
    </div>
  </div>
  
  
  <div id="CollectionScreen" class="Page">
    <div class="NavBar">
      <button onclick="backClick('CollectionScreen')">Back</button>
    </div>
    <div class="Content" style="color: white;">
      <h1 class="Title">Collections Screen</h1>
      <div class="manuallyAdded" id="manual">
        <div  id="insertBefore">
        </div>
      </div>
    </div>
  </div>
  
  <div id="AnalysisScreen" class="Page">
    <div class="NavBar">
      <button onclick="backClick('AnalysisScreen')">Back</button>
    </div>
    <div class="Content">
      <h1 class="Title">Analysis Screen</h1>
    </div>
  </div>
  
  <div id="RecommendScreen" class="Page">
    <div class="NavBar">
      <button onclick="backClick('RecommendScreen')">Back</button>
    </div>
    <div class="Content">
      <h1 class="Title">Recommend Screen</h1>
    </div>
  </div>
  
  <div id="AddNewScreen" class="Page">
    <div class="NavBar">
      <button onclick="backClick('AddNewScreen')">Back</button>
    </div>
    <div class="Content">
      <h1 class="Title">Add New</h1>
      
      <div id="inputForm">
        <form style="color: #FFFFFF;">
          Game Title: <br> <input type="text" id="gameTitleInput" name="gameTitle" value="game title">
          <br>
          <p id="searchResults"></p>
        </form>
        <button type="button" onclick="searchForGame()">Search</button>
        <button type="button" id="addToDatabaseButton" onclick="addToDatabaseForm()" style="display:none;">Add To Database</button>
      </div>
      
      <div id="addForm" style="display: none;">
        <form style="color: #FFFFFF;">
          Game Title: <br> <input type="text" id="inputTitle" value="game title">
          <br>
          Rating: <br> <input type="text" id="inputPopularity" value="rate from 1 to 10">
          <br>
          Difficulty: <br> <input type="text" id="inputDifficulty" value="rate from 1 to 10">
          <br>
          Length: <br> <input type="text" id="inputLength" value="number of hours to complete the game">
          <br>
          Release Year: <br> <input type="text" id="inputRetroness" value="year of the game's release">
          <br>
          Intensity: <br> <input type="text" id="inputIntensity" value="rate from 1 to 10">
          <br>
          Violence: <br> <input type="text" id="inputViolence" value="rate from 1 to 10">
          <br>
          <p id="confirmation"></p>
        </form>
        <button type="button" onclick="addToDatabase()">Confirm</button>
      </div>
    </div>
  </div>
  
  
  <script>
    function selectionClick(id){
      document.getElementById("HomeScreen").style.display = "none";
      document.getElementById(id).style.display = "block";
    };
    
    function backClick(id){
      document.getElementById("HomeScreen").style.display = "block";
      document.getElementById(id).style.display = "none";
    };
    
    function searchForGame(){
      var inputVal = document.getElementById("gameTitleInput").value;
      document.getElementById("searchResults").innerHTML = inputVal + " not found.";
      document.getElementById("addToDatabaseButton").style.display = "inline";
    };
    
    function addToDatabaseForm(){
      //show the add form
      document.getElementById("addForm").style.display = "block";
      
      //hide the input form
      document.getElementById("inputForm").style.display = "none";
      
    };
    
    function addToDatabase(){
      //hide the add form
      document.getElementById("addForm").style.display = "none";
      
      //show input new form
      document.getElementById("inputForm").style.display = "block";
      
      //pull data from new form
      var title = document.getElementById("inputTitle").value;
      var popularity = document.getElementById("inputPopularity").value;
      var difficulty = document.getElementById("inputDifficulty").value;
      var length = document.getElementById("inputLength").value;
      var retroness = document.getElementById("inputRetroness").value;
      var intensity = document.getElementById("inputIntensity").value;
      var violence = document.getElementById("inputViolence").value;
      
      //insert data into collections
      createNewGame(title, popularity, difficulty, length, retroness, intensity, violence);
    };
    
    function createNewGame(tit, pop, dif, len, ret, int, vio) {
      //create a new div
      const newDiv = document.createElement("div");
      newDiv.style = "outline-width: 2px; outline-style: solid;";
      
      //give it content
      const image = document.createElement("img");
      image.src = "images/GenericGameImage.png";
      var content = document.createTextNode(tit);
      var breakline = document.createElement("br");
      
      //add the text node to the new div
      newDiv.appendChild(image);
      newDiv.appendChild(breakline);
      newDiv.appendChild(content);
      breakline = document.createElement("br");
      newDiv.appendChild(breakline);
      
      //repeat
      content = document.createTextNode("Popularity: " + pop);
      breakline = document.createElement("br");
      newDiv.appendChild(content);
      newDiv.appendChild(breakline);
      content = document.createTextNode("Difficulty: " + dif);
      breakline = document.createElement("br");
      newDiv.appendChild(content);
      newDiv.appendChild(breakline);
      var length = calcLength(len);
      content = document.createTextNode("Length: " + length);
      breakline = document.createElement("br");
      newDiv.appendChild(content);
      newDiv.appendChild(breakline);
      var retroness = calcRetroness(ret);
      content = document.createTextNode("Retroness: " + retroness);
      breakline = document.createElement("br");
      newDiv.appendChild(content);
      newDiv.appendChild(breakline);
      content = document.createTextNode("Intensity: " + int);
      breakline = document.createElement("br");
      newDiv.appendChild(content);
      newDiv.appendChild(breakline);
      content = document.createTextNode("Violence: " + vio);
      breakline = document.createElement("br");
      newDiv.appendChild(content);
      newDiv.appendChild(breakline);
      
      //insert
      const currentDiv = document.getElementById("insertBefore");
      document.getElementById("manual").insertBefore(newDiv,currentDiv);
    };
    
    function calcRetroness(year) {
      year = parseInt(year);
      const oldest = 1987;
      const yearsSince = year - 1987;
      var max = new Date().getFullYear() - 1987;
      var out = max / yearsSince;
      return Math.round(out * 10) / 10;
    };
    
    function calcLength(hours) {
      hours = parseInt(hours);
      if (hours > 80) {
        hours = 80;
      }
      var out = hours / 80 * 10;
      return Math.round(out * 10) / 10;
    };
      
  </script>
  
</body>
</html>
